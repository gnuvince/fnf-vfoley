\documentclass[11pt]{beamer}

\usefonttheme{serif}
\usepackage{ebgaramond}

\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{ amssymb }
\usepackage{ multirow }

\usepackage{xcolor}


\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{footline}[frame number]{}
%\setbeamertemplate{footline}{\hfill\insertframenumber~\vrule~\inserttotalframenumber}
\lstset{
  stepnumber=1,
  breaklines=true,
  basicstyle=\ttfamily\scriptsize,
  numberstyle=\tiny,
  commentstyle=\color{gray},
  showstringspaces=false,
  keepspaces=true,
  escapeinside=\#\#
}


\renewcommand\big[1]{
  \begin{center}
    \Large{#1}
  \end{center}
}
\newcommand{\Fbox}[1]{\fbox{\strut#1}}

\begin{document}

\begin{frame}
  \begin{center}
    \Huge{Phantom Types}
    \vskip1cm
    \includegraphics[scale=0.5]{phantom.eps}
  \end{center}
\end{frame}


\begin{frame}
  \big{Example problem \#1}

  \begin{center}
    We want to safely manipulate amounts of money of different currencies.
  \end{center}
\end{frame}

\begin{frame}
  \big{Approach \#1}
  \centering``I don't make mistakes when I code.''
  \pause
  \vskip1cm
  \begin{minipage}[t]{.48\textwidth}
    Pros:
    \footnotesize
    \begin{itemize}
      \item Simple
      \item No extra cost at run-time
    \end{itemize}
  \end{minipage}
  \begin{minipage}[t]{.48\textwidth}
    Cons:
    \footnotesize
    \begin{itemize}
      \item Easy to mix currencies
      \item Can't determine the currency of an amount
    \end{itemize}
  \end{minipage}
\end{frame}

\begin{frame}
  \big{Approach \#2}
  \centering Create an object that records the currency
  \pause
  \vskip1cm
  \begin{minipage}[t]{.48\textwidth}
    Pros:
    \footnotesize
    \begin{itemize}
      \item Can't just add two amounts
      \item Can determine the currency of an amount
    \end{itemize}
  \end{minipage}
  \begin{minipage}[t]{.48\textwidth}
    Cons:
    \footnotesize
    \begin{itemize}
      \item More verbose
      \item Extra cost at run-time
      \item Need to remember to check currency
    \end{itemize}
  \end{minipage}
\end{frame}

\begin{frame}
  \big{Approach \#3}
  \centering Use a phantom type to track the currency
  \pause
  \vskip1cm
  \begin{minipage}[t]{.48\textwidth}
    Pros:
    \footnotesize
    \begin{itemize}
      \item Can't add two amounts of different currencies
      \item Can determine the currency of an amount
      \item Same cost as a float
      \item Errors are reported at compile-time
    \end{itemize}
  \end{minipage}
  \begin{minipage}[t]{.48\textwidth}
    Cons:
    \footnotesize
    \begin{itemize}
      \item Needs one type per currency
      \item Can be complicated by details of implementation
      \item Not available in all languages---like Erlang :(
    \end{itemize}
  \end{minipage}
\end{frame}

\begin{frame}
  \big{Phantom Types}

  \begin{itemize}
    \item Type parametrized another type; {\tt class Money<T> \{ $\ldots$ \}};
    \item The parametric type is \emph{not} used on the right-hand side;
    \item Typically, the parametric type has no values.
  \end{itemize}
\end{frame}

\begin{frame}
  \big{Phantom Types}

  \begin{itemize}
    \item The purpose is to encode an information in the type to let the typechecker warn us when we make a mistake;
    \item It can be used to distinguish between different use cases when a single type has multiple interpretation, e.g., a HTML string and a SQL string.
  \end{itemize}
\end{frame}

\begin{frame}
  \big{Example \#2}

  \centering Stumping script kiddies with stricter strings

  \vskip1cm

  \color{blue}{\url{http://blog.moertel.com/posts/2006-10-18-a-type-based-solution-to-the-strings-problem.html}}
\end{frame}

\begin{frame}
  \centering \includegraphics[scale=0.8]{phantom.eps}
\end{frame}

\end{document}
